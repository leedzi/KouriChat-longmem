关于此 Fork (特殊的记忆系统修改)
这是一个基于 KouriChat 项目的个人修改版本，主要目标是将 v1.3.9 版本重构后的记忆系统机制，恢复为类似于 v1.3.7 版本之前的长期累积记忆模式。

原版在 v1.3.9 之后引入了“核心记忆”系统，该系统每隔 10 轮对话会刷新一次，用新的摘要覆盖旧的。虽然这可能带来更精炼的核心信息，但也可能导致一些用户觉得记忆保留时间不够长或容易丢失细节。

本修改版旨在解决这个问题，采用了如下不同的记忆处理逻辑：

短期记忆 (short_memory.txt):

仍然记录用户与 AI 的对话。
触发方式改变: 不再基于固定的对话轮数（10轮），而是当短期记忆文件的行数达到一个阈值（默认约 30 行，对应 15 轮对话）时触发总结。
文件格式为 .txt。
长期记忆缓冲区 (long_memory_buffer.txt):

取代了原版的 core_memory.json 文件。
累积存储: 当短期记忆触发总结时，生成的对话摘要会被追加到这个文件的末尾，并附带时间戳。记忆会随着时间推移不断增长。
文件格式为 .txt。
记忆管理实现 (modules/memory/memory_service.py):

add_conversation(): 加入了检查短期记忆文件行数并在达到阈值时调用总结流程的逻辑。
update_core_memory(): 功能被完全重写。现在它的作用是执行“读取短期记忆 -> 调用 LLM 总结 -> 将总结追加到长期记忆缓冲区 -> 清空短期记忆”这一系列操作。这个函数名是为了保持对项目其他部分调用的兼容性。
get_core_memory(): 功能被修改。为了尽可能兼容原版调用，此函数现在读取长期记忆缓冲区文件，并返回最后一次记录在文件中的总结内容。这提供了一种获取部分长期记忆的方式，但它不能像旧版那样根据当前用户输入智能检索最相关的多条记忆。
get_recent_context(): 功能保留，但现在从 .txt 格式的短期记忆文件中读取，并且因为短期记忆会在总结后清空，它能提供的上下文通常会少于 15 轮。
(新增) get_relevant_memories(): 添加了这个方法，包含了旧版根据用户查询从长期记忆中检索最相关 N 条总结的核心逻辑。但请注意，项目中的其他代码默认并未修改为调用此方法。如果需要完整的相关记忆检索能力，需要进一步修改调用方的代码。
重要提醒:

此版本不是 KouriChat 官方版本。
由于 get_core_memory 的行为调整，AI 对过去信息的“回忆”能力可能与你对旧版（v1.3.7）的预期略有不同（除非你修改代码以使用 get_relevant_memories）。
本修改基于特定版本的 KouriChat 代码，可能与官方后续的更新产生冲突。
使用前建议备份或清理旧的记忆文件 (.json 格式的文件)。
